# POI数据获取方案验证

> 状态：待验证
> 目的：确定用什么技术获取景点数据，验证可行性后再规范标注流程

---

## 一、我们需要什么数据？

| 字段 | 必要性 | 说明 |
|-----|--------|------|
| name | 必须 | 景点名称 |
| lng/lat | 必须 | 经纬度（用于地图展示和路线计算） |
| address | 必须 | 地址 |
| area | 必须 | 所属区域（用于分天分配） |
| tags | 必须 | 标签（用于主题匹配） |
| visit_duration | 必须 | 游玩时长（用于时间计算） |
| brief | 可选 | 简介 |
| cover_image | 可选 | 封面图 |
| open_time | 可选 | 营业时间 |
| ticket_price | 可选 | 门票价格 |

---

## 二、数据获取方案对比

### 方案A：高德地图API

**能获取的数据**：
- name ✓
- lng/lat ✓
- address ✓
- 分类（如"风景名胜"） ✓

**获取不到的数据**：
- area ✗ （需要根据地址人工归类）
- tags ✗ （高德分类太粗，需人工细化）
- visit_duration ✗
- brief ✗

**优点**：
- 数据准确可靠
- 有官方API，稳定
- 经纬度准确，可直接用于路线计算

**缺点**：
- 只有基础信息，业务字段需人工补充
- API有调用次数限制（免费5000次/天）

**API示例**：
```
GET https://restapi.amap.com/v3/place/text
  ?keywords=景点
  &city=大理
  &types=110000  (风景名胜类)
  &key=你的key
```

---

### 方案B：携程/马蜂窝数据

**能获取的数据**：
- name ✓
- address ✓
- 简介 ✓
- 推荐游玩时长 ✓
- 门票价格 ✓
- 用户评分 ✓
- 标签（平台自带） ✓

**获取不到的数据**：
- lng/lat ✗ （通常不直接提供，需要转换）

**优点**：
- 数据丰富，游玩时长、标签等都有
- 更接近用户视角

**缺点**：
- 没有官方API，需要爬虫（可能违规）
- 数据格式不统一
- 经纬度需要额外获取

---

### 方案C：AI生成 + 人工校验

**流程**：
1. 用ChatGPT/Claude生成大理景点列表和描述
2. 用高德API补充经纬度
3. 人工校验和修正

**优点**：
- 快速获得结构化数据
- 标签、简介等直接生成

**缺点**：
- AI可能编造不存在的景点
- 经纬度必须用其他方式获取
- 需要人工校验每一条

---

### 方案D：高德API + 人工补充（推荐）

**流程**：
```
Step 1: 高德API获取基础数据
        ↓
        得到：name, lng, lat, address, 高德分类

Step 2: 人工补充业务字段
        ↓
        参考携程/马蜂窝页面，补充：
        - area（根据地址判断）
        - tags（根据景点特性判断）
        - visit_duration（参考平台推荐时长）
        - brief（摘抄简介）

Step 3: 录入数据库
```

**优点**：
- 经纬度准确（来自高德）
- 业务字段可控（人工标注）
- 不涉及爬虫法律问题

**缺点**：
- 人工标注有工作量（但MVP只需50个左右景点）

---

## 三、推荐方案

**MVP阶段推荐：方案D（高德API + 人工补充）**

理由：
1. 经纬度必须准确（路线计算依赖），高德最可靠
2. 业务字段（标签、时长）本来就需要根据业务定义，人工标注更可控
3. MVP只需50个左右景点，人工标注工作量可接受
4. 不涉及法律风险

---

## 四、验证步骤

### 4.1 验证高德API可用性

**目标**：确认高德API能返回大理景点数据

**步骤**：
1. 用你的高德Key调用POI搜索接口
2. 搜索「大理 景点」
3. 查看返回的数据结构和数量

**预期结果**：
- 能返回20-50个景点
- 每个景点有name、location（经纬度）、address

**验证命令**（curl）：
```bash
curl "https://restapi.amap.com/v3/place/text?keywords=景点&city=大理&types=110000&offset=20&key=你的KEY"
```

---

### 4.2 验证数据质量

**目标**：确认返回的数据能满足需求

**检查项**：
- [ ] 返回的景点是否是真实的旅游景点（不是酒店、餐厅）
- [ ] 经纬度是否在大理范围内（经度约100°，纬度约25-26°）
- [ ] 地址是否完整

---

### 4.3 验证人工标注可行性

**目标**：测试人工标注一个景点需要多长时间

**步骤**：
1. 从高德API结果中取一个景点（如「大理古城」）
2. 打开携程/马蜂窝搜索该景点
3. 记录找到以下信息需要的时间：
   - area：属于哪个区域
   - tags：什么类型
   - visit_duration：推荐游玩多久
   - brief：一句话简介

**预期结果**：
- 单个景点标注时间 < 5分钟
- 50个景点 = 约4小时工作量（可接受）

---

## 五、验证产出

验证完成后，产出以下结论：

```
1. 高德API验证结果：
   - 是否可用：是/否
   - 返回景点数量：___个
   - 数据质量评价：好/一般/差

2. 人工标注验证结果：
   - 单个景点标注时间：___分钟
   - 50个景点预计工作量：___小时

3. 最终方案确认：
   - 采用方案：___
   - 需要调整：___
```

---

## 六、下一步

验证通过后：
1. 正式设计标签体系（确定有哪些标签）
2. 设计区域划分（大理分几个区域）
3. 制作POI标注模板（Excel/JSON格式）
4. 批量获取高德数据 + 人工标注
5. 导入数据库

---

## 附：高德API相关信息

**申请地址**：https://lbs.amap.com/

**需要的Key类型**：
- Web服务Key（用于后端调用POI搜索、路线规划）

**API文档**：
- POI搜索：https://lbs.amap.com/api/webservice/guide/api/search
- 路线规划：https://lbs.amap.com/api/webservice/guide/api/direction

**你已有的Key**：
- Web服务Key：已配置在部署文档中
